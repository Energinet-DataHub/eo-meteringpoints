eo-base-helm-chart:
  deployments:
    api:
      replicaCount: 1
      command: "/bin/bash"
      args: "entrypoint_api.sh"
      probes: true
      env:
        SQL_URI: postgresql://postgres:1234@eo-postgresql.eo-postgresql.svc.cluster.local:5432/meteringpoints
        SQL_POOL_SIZE: 1
      image:
        repository: Energinet-DataHub/eo-meteringpoints
        tag: 0.0.1
        pullPolicy: Always

  service:
    deployment: api
    type: ClusterIP
    port: 80

  ingress:
    hosts: []
    paths:
      - /api/meteringpoints
    servicePort: 80
    middlewares:
      - eo-auth-service
      - meteringpoints-stripprefix

  middleware:
    stripPrefix:
      name: meteringpoints-stripprefix
      prefixes:
        - /api/meteringpoints
